<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battery Smart Auto-QA Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <span class="logo-icon">‚ö°</span>
                <span class="logo-text">Battery Smart</span>
            </div>
            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-section="overview">
                    <span class="nav-icon">üìä</span>
                    <span>Overview</span>
                </a>
                <a href="#" class="nav-item" data-section="scorecards">
                    <span class="nav-icon">üìã</span>
                    <span>Scorecards</span>
                </a>

                <a href="#" class="nav-item" data-section="cities">
                    <span class="nav-icon">üèôÔ∏è</span>
                    <span>City Analysis</span>
                </a>
                <a href="#" class="nav-item" data-section="complaints">
                    <span class="nav-icon">üìû</span>
                    <span>Complaints</span>
                </a>
                <a href="#" class="nav-item" data-section="alerts">
                    <span class="nav-icon">üö®</span>
                    <span>Supervisor Alerts</span>
                </a>

                <a href="#" class="nav-item" data-section="profile">
                    <span class="nav-icon">üë§</span>
                    <span>Profile</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button class="logout-btn" onclick="handleLogout()">
                    <span>üö™</span> Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="header">
                <h1 id="page-title">Auto-QA Dashboard</h1>
                <div class="header-info">
                    <span class="date" id="current-date"></span>
                    <span class="refresh-btn" onclick="refreshData()">üîÑ Refresh</span>
                    <div class="user-menu">
                        <div class="user-avatar" id="user-avatar" onclick="toggleUserMenu()">A</div>
                        <div class="user-dropdown" id="user-dropdown">
                            <div class="user-info-card">
                                <div class="user-avatar-large" id="user-avatar-large">A</div>
                                <div class="user-details">
                                    <span class="user-name" id="header-user-name">Admin</span>
                                    <span class="user-role">Administrator</span>
                                </div>
                            </div>
                            <a href="#" class="dropdown-item" onclick="switchSection('profile')">üë§ Profile</a>
                            <a href="#" class="dropdown-item" onclick="handleLogout()">üö™ Logout</a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Overview Section -->
            <section id="overview" class="section active">
                <div class="stats-grid">
                    <div class="stat-card primary">
                        <div class="stat-icon">üìû</div>
                        <div class="stat-content">
                            <h3>Total Calls</h3>
                            <p class="stat-value" id="total-calls">-</p>
                        </div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-content">
                            <h3>Avg Score</h3>
                            <p class="stat-value" id="avg-score">-</p>
                        </div>
                    </div>
                    <div class="stat-card warning">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-content">
                            <h3>Needs Review</h3>
                            <p class="stat-value" id="needs-review">-</p>
                        </div>
                    </div>
                    <div class="stat-card info">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-content">
                            <h3>Excellent Calls</h3>
                            <p class="stat-value" id="excellent-calls">-</p>
                        </div>
                    </div>
                </div>

                <div class="charts-row">
                    <div class="chart-card">
                        <h3>Score Distribution</h3>
                        <canvas id="scoreDistChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Pillar Performance</h3>
                        <canvas id="pillarChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Scorecards Section -->
            <section id="scorecards" class="section">
                <div class="section-header">
                    <h2>QA Scorecards</h2>
                </div>
                <div class="calls-table-container">
                    <table class="calls-table">
                        <thead>
                            <tr>
                                <th>Call ID</th>
                                <th>Agent</th>
                                <th>City</th>
                                <th>Score</th>
                                <th>Grade</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="calls-tbody">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Agent Leaderboard Section -->
            <section id="agents" class="section">
                <div class="section-header">
                    <h2>Agent Leaderboard</h2>
                </div>
                <div class="leaderboard-container">
                    <div class="leaderboard" id="agent-leaderboard">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </section>

            <!-- City Analysis Section -->
            <section id="cities" class="section">
                <div class="section-header">
                    <h2>City Hub Performance</h2>
                </div>
                <div class="cities-grid" id="cities-grid">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- Complaints Section -->
            <section id="complaints" class="section">
                <div class="section-header">
                    <h2>Complaint Analysis</h2>
                </div>
                <div class="charts-row">
                    <div class="chart-card wide">
                        <h3>Complaint Distribution</h3>
                        <canvas id="complaintsChart"></canvas>
                    </div>
                </div>
                <div class="complaint-list" id="complaint-list">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- Supervisor Alerts Section -->
            <section id="alerts" class="section">
                <div class="section-header">
                    <h2>Supervisor Alerts</h2>
                    <span class="alert-badge" id="alert-count">0</span>
                </div>
                <div class="alerts-container" id="alerts-container">
                    <!-- Populated by JS -->
                </div>
            </section>

            <!-- Profile Section -->
            <section id="profile" class="section">
                <div class="section-header">
                    <h2>My Profile</h2>
                </div>
                <div class="profile-container">
                    <div class="profile-card">
                        <div class="profile-header">
                            <div class="profile-avatar" id="profile-avatar">A</div>
                            <div class="profile-info">
                                <h2 id="profile-name">Admin User</h2>
                                <p id="profile-email">admin@batterysmart.com</p>
                                <span class="profile-role">Administrator</span>
                            </div>
                        </div>
                        <form id="profile-form" onsubmit="handleProfileUpdate(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Full Name</label>
                                    <input type="text" id="profile-name-input" required>
                                </div>
                                <div class="form-group">
                                    <label>Phone Number</label>
                                    <input type="tel" id="profile-phone-input">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>City</label>
                                    <input type="text" id="profile-city-input">
                                </div>
                                <div class="form-group">
                                    <label>Role</label>
                                    <input type="text" id="profile-role-input" value="Administrator" disabled>
                                </div>
                            </div>
                            <div class="profile-stats">
                                <div class="stat">
                                    <span class="stat-value" id="stat-role">Admin</span>
                                    <span class="stat-label">Account Type</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-value" id="stat-since">Jan 2024</span>
                                    <span class="stat-label">Member Since</span>
                                </div>
                            </div>
                            <button type="submit" class="btn-primary">Save Changes</button>
                        </form>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Call Detail Modal -->
    <div id="call-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <div id="modal-body">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>

</html>